!function(e){function t(t){for(var i,r,a=t[0],c=t[1],l=t[2],p=0,u=[];p<a.length;p++)r=a[p],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&u.push(o[r][0]),o[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);for(h&&h(t);u.length;)u.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],i=!0,a=1;a<s.length;a++){var c=s[a];0!==o[c]&&(i=!1)}i&&(n.splice(t--,1),e=r(r.s=s[0]))}return e}var i={},o={0:0},n=[];function r(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=i,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(s,i,function(t){return e[t]}.bind(null,i));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var h=c;n.push([5,1]),s()}([function(e,t,s){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,s,i){void 0===i&&(i=s),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||t.hasOwnProperty(s)||i(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0});var n=s(11);Object.defineProperty(t,"Teams",{enumerable:!0,get:function(){return n.default}});var r=s(12);Object.defineProperty(t,"Players",{enumerable:!0,get:function(){return r.default}}),o(s(13),t),o(s(14),t)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(9);Object.defineProperty(t,"Goal",{enumerable:!0,get:function(){return i.default}});var o=s(10);Object.defineProperty(t,"Ball",{enumerable:!0,get:function(){return o.default}});var n=s(15);Object.defineProperty(t,"Team",{enumerable:!0,get:function(){return n.default}});var r=s(16);Object.defineProperty(t,"Spot",{enumerable:!0,get:function(){return r.default}});var a=s(17);Object.defineProperty(t,"SupportSpots",{enumerable:!0,get:function(){return a.default}});var c=s(3);Object.defineProperty(t,"PlayerBase",{enumerable:!0,get:function(){return c.default}});var l=s(19);Object.defineProperty(t,"PlayerField",{enumerable:!0,get:function(){return l.default}});var h=s(20);Object.defineProperty(t,"PlayerKeeper",{enumerable:!0,get:function(){return h.default}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRegionPos=t.setText=void 0;t.setText=function(e,t){document.querySelector(e).innerHTML=t};t.getRegionPos=function(e){return new Phaser.Math.Vector2(160+e%6*192,160+192*Math.floor(e/6))}},function(e,t,s){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)});Object.defineProperty(t,"__esModule",{value:!0}),t.Modes=void 0;var n,r=s(0),a=s(18);!function(e){e[e.Track=0]="Track",e[e.Seek=1]="Seek",e[e.Pursuit=2]="Pursuit",e[e.Interpose=3]="Interpose"}(n=t.Modes||(t.Modes={}));var c=function(e){function t(t,s,i,o,r,c,l,h,p){var u=e.call(this,t,s,i,"sprites",o)||this;return u.home=h,u.team=p,u.scene.add.existing(u),u.scene.physics.world.enable(u),u.setData(r),u.setData({name:l,index:c,isReadyForNextKick:!0,mode:n.Track}),u.setSize(16,16),u.setCircle(8),u.setDepth(3),u.info=new a.default(u.scene,c,p.isLeft),u.scene.events.on("postupdate",(function(){this.info.x=this.x,this.info.y=this.y}),u),u}return o(t,e),t.prototype.movePlayer=function(e){var t=this.getData(["speed","mode"]),s=t[0];switch(t[1]){case n.Pursuit:var i=this.scene.ball.body.speed,o=this.scene.ball.position.clone().subtract(this.position).length(),r=0;0!==i&&(r=o/i),this.setTarget(this.scene.ball.futurePosition(r));case n.Seek:var a=Phaser.Math.Angle.BetweenPoints(this.position,this.target);this.setRotation(a),this.setVelocity(s*e*Math.cos(a),s*e*Math.sin(a));break;case n.Track:this.setVelocity(0,0),this.setRotation(Phaser.Math.Angle.BetweenPoints(this.position,this.scene.ball.position));break;case n.Interpose:var c=Phaser.Math.Angle.BetweenPoints(this.position,this.scene.ball.position);this.setTarget(this.rearInterposeTarget);var l=this.position.distance(this.target),h=new Phaser.Math.Vector2(this.scene.ball.position.x-this.target.x,this.scene.ball.position.y-this.target.y).normalize(),p=new Phaser.Math.Vector2(this.target.x+h.x*l,this.target.y+h.y*l),u=Phaser.Math.Angle.BetweenPoints(this.position,p);this.setRotation(c),this.setVelocity(s*e*Math.cos(u),s*e*Math.sin(u))}},t.prototype.setMode=function(e){return this.setData({mode:e}),this},t.prototype.setTarget=function(e){return this.target=e,this},t.prototype.setHome=function(e){return this.home=e,this},t.prototype.returnHome=function(){return this},t.prototype.returnHomeIfWaiting=function(e){return this},t.prototype.passToRequester=function(e){return this},t.prototype.isCloseToHome=function(e){return void 0===e&&(e=10),this.position.fuzzyEquals(this.home,e)},t.prototype.isCloseToTarget=function(e){return void 0===e&&(e=10),this.position.fuzzyEquals(this.target,e)},t.prototype.inHomeRegion=function(){return this.isCloseToHome(96)},Object.defineProperty(t.prototype,"isAtHome",{get:function(){return this.isCloseToHome()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAtTarget",{get:function(){return this.isCloseToTarget()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return new Phaser.Math.Vector2(this.x,this.y)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"facing",{get:function(){return new Phaser.Math.Vector2(1,0).setAngle(this.rotation)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speedPerSecond",{get:function(){return this.speedPerFrame*r.TIME_DELTA_MILI},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speedPerFrame",{get:function(){return this.getData("speed")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReadyForNextKick",{get:function(){return this.getData("isReadyForNextKick")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"role",{get:function(){return this.getData("role")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isClosestPlayerOnPitchToBall",{get:function(){return this===this.team.closestPlayerOnPitchToBall},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isClosestPlayerToBall",{get:function(){return this===this.team.closestPlayer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rearInterposeTarget",{get:function(){var e=this.team.goalHome.position.x,t=this.scene.pitch.height/2+64-this.team.goalHome.height/2+this.team.goalHome.height*((this.scene.ball.position.y-64)/this.scene.pitch.height);return new Phaser.Math.Vector2(e,t)},enumerable:!1,configurable:!0}),t}(Phaser.Physics.Arcade.Sprite);t.default=c},,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s(4);var i=s(6),o={type:Phaser.AUTO,width:1280,height:704,zoom:1,input:{keyboard:!0,gamepad:!0,mouse:!1,touch:!1},render:{pixelArt:!0,antialias:!1,antialiasGL:!1},parent:"phaser",physics:{default:"arcade",arcade:{gravity:{y:0}}},scene:[i.LoaderScene,i.GameScene]};window.addEventListener("load",(function(){new Phaser.Game(o)}))},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(7);Object.defineProperty(t,"LoaderScene",{enumerable:!0,get:function(){return i.default}});var o=s(8);Object.defineProperty(t,"GameScene",{enumerable:!0,get:function(){return o.default}})},function(e,t,s){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)});Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.preload=function(){this.load.image("font3x5","./assets/images/font3x5.png"),this.load.image("goal","./assets/images/goal.png"),this.load.image("pitch","./assets/images/pitch.png"),this.load.spritesheet("sprites","./assets/images/sprites.png",{frameWidth:32,frameHeight:32})},t.prototype.create=function(){this.game.events.on(Phaser.Core.Events.BLUR,(function(){this.scene.get("game").scene.pause()}),this),this.game.events.on(Phaser.Core.Events.FOCUS,(function(){this.scene.get("game").scene.resume()}),this),this.cache.bitmapFont.add("font3x5",Phaser.GameObjects.RetroFont.Parse(this,{image:"font3x5",width:4,height:6,chars:Phaser.GameObjects.RetroFont.TEXT_SET5,charsPerRow:16,lineSpacing:1,"spacing.x":0,"spacing.y":0,"offset.x":0,"offset.y":0})),this.scene.start("game")},t}(Phaser.Scene);t.default=n},function(e,t,s){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)});Object.defineProperty(t,"__esModule",{value:!0});var n=s(1),r=s(0),a=function(e){function t(){return e.call(this,{key:"game",active:!1,visible:!1})||this}return o(t,e),t.prototype.init=function(){this.data.set({goalkeeperHasBall:!1,gameOn:!1},!1)},t.prototype.create=function(){var e=this.add.image(0,0,"pitch").setOrigin(0,0),t=e.width,s=e.height;this.pitch=new Phaser.Geom.Rectangle(64,64,t-128,s-128),this.ball=new n.Ball(this,t/2,s/2).setDepth(3),this.goalA=new n.Goal(this,64,s/2,1),this.goalB=new n.Goal(this,t-64,s/2,-1),this.teamA=new n.Team(this,1,!0,this.goalB,this.goalA,r.redRegions).setDepth(2),this.teamB=new n.Team(this,2,!1,this.goalA,this.goalB,r.blueRegions).setDepth(2),this.teamA.setOpponents(this.teamB),this.teamB.setOpponents(this.teamA),this.physics.add.collider(this.ball,[this.goalA,this.goalB]),this.physics.add.collider([this.teamA,this.teamB],[this.goalA,this.goalB]),this.physics.add.collider(this.teamA,this.teamB),this.physics.add.collider(this.teamB,this.teamA),this.physics.add.overlap(this.ball,this.goalA.target,(function(){this.goalA.score()}),null,this),this.physics.add.overlap(this.ball,this.goalB.target,(function(){this.goalB.score()}),null,this),this.scoreText=new Phaser.GameObjects.BitmapText(this,t/2,12,"font3x5","0-0",null,Phaser.GameObjects.BitmapText.ALIGN_CENTER).setOrigin(1/16,0).setScale(8).setDepth(10),this.add.existing(this.scoreText),this.physics.world.setBounds(64,64,t-128,s-128),this.cameras.main.setBounds(0,0,t,s)},t.prototype.update=function(){!this.gameOn&&this.teamA.isAllPlayersHome&&this.teamB.isAllPlayersHome&&(this.gameOn=!0)},t.prototype.reset=function(){this.gameOn&&(this.gameOn=!1,this.scoreText.setText(this.goalA.scored+"-"+this.goalB.scored),this.teamA.kickOff(),this.teamB.kickOff(),this.time.delayedCall(1e3,(function(){this.ball.place(640,352)}),[],this))},t.prototype.setGoalkeeperHasBall=function(e){this.goalkeeperHasBall=e},Object.defineProperty(t.prototype,"goalkeeperHasBall",{get:function(){return this.data.get("goalkeeperHasBall")},set:function(e){this.data.set("goalkeeperHasBall",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gameOn",{get:function(){return this.data.get("gameOn")},set:function(e){this.data.set("gameOn",e)},enumerable:!1,configurable:!0}),t}(Phaser.Scene);t.default=a},function(e,t,s){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)});Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(t,s,i,o){var n=e.call(this,t)||this;n.scored=0,n.facing=new Phaser.Math.Vector2(o,0),n.goal=n.scene.add.image(s-32*o,i,"goal").setFlipX(o<0).setDepth(8),n.target=new Phaser.GameObjects.Rectangle(n.scene,s-42*o,i,44,128,65535,0).setDepth(10),n.scene.add.existing(n.target);var r=new Phaser.GameObjects.Rectangle(n.scene,s-34*o,i-60,60,8),a=new Phaser.GameObjects.Rectangle(n.scene,s-60*o,i,8,128),c=new Phaser.GameObjects.Rectangle(n.scene,s-34*o,i+60,60,8),l=new Phaser.GameObjects.Ellipse(n.scene,s-4*o,i+60,8,8),h=new Phaser.GameObjects.Ellipse(n.scene,s-4*o,i-60,8,8);return n.scene.add.existing(n),n.scene.physics.world.enable(n.target,Phaser.Physics.Arcade.STATIC_BODY),n.scene.physics.world.enable(a,Phaser.Physics.Arcade.STATIC_BODY),n.scene.physics.world.enable(r,Phaser.Physics.Arcade.STATIC_BODY),n.scene.physics.world.enable(h,Phaser.Physics.Arcade.STATIC_BODY),n.scene.physics.world.enable(c,Phaser.Physics.Arcade.STATIC_BODY),n.scene.physics.world.enable(l,Phaser.Physics.Arcade.STATIC_BODY),n.add(a),n.add(r),n.add(h),n.add(c),n.add(l),n}return o(t,e),t.prototype.score=function(){this.scene.gameOn&&(this.scored++,this.scene.reset())},Object.defineProperty(t.prototype,"width",{get:function(){return this.goal.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.goal.height-16},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return new Phaser.Math.Vector2(this.goal.x+32*this.facing.x,this.goal.y)},enumerable:!1,configurable:!0}),t}(Phaser.GameObjects.Group);t.default=n},function(e,t,s){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)});Object.defineProperty(t,"__esModule",{value:!0});var n=s(0),r=function(e){function t(t,s,i){var o=this;return(o=e.call(this,t,s,i,"sprites",0)||this).scene.add.existing(o),o.scene.physics.world.enable(o),o.body.setBounce(.5,.5),o.body.setDrag(n.DRAG,n.DRAG),o.body.useDamping=!0,o.setSize(8,8),o.setCircle(4),o}return o(t,e),t.prototype.kick=function(e,t){this.setVelocity(t*Math.cos(e),t*Math.sin(e))},t.prototype.place=function(e,t){this.setVelocity(0,0),this.setPosition(e,t)},t.prototype.trap=function(){this.setVelocity(0,0)},t.prototype.timeToCoverDistance=function(e,t){for(var s=0,i=0;t>.1&&s<e;)t*=n.DRAG,s+=n.TIME_DELTA*t,i+=n.TIME_DELTA,t<=.1&&(i=-1);return i},t.prototype.futurePosition=function(e){for(var t=this.position.clone(),s=this.body.velocity.clone(),i=0;i<e/n.TIME_DELTA_MILI;i++)s.x*=n.DRAG,s.y*=n.DRAG,t.x+=n.TIME_DELTA*s.x,t.y+=n.TIME_DELTA*s.y;return t},Object.defineProperty(t.prototype,"position",{get:function(){return new Phaser.Math.Vector2(this.x,this.y)},enumerable:!1,configurable:!0}),t}(Phaser.Physics.Arcade.Image);t.default=r},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=[{id:1,frame:2,name:"red",players:[1,2,3,4,5]},{id:2,frame:1,name:"blue",players:[1,2,3,4,5]}]},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=[{id:1,name:"Player",role:"GK",speed:4,strength:1,power:1,toughness:1,accuracy:1},{id:2,name:"Player",role:"DF",speed:5,strength:1,power:1,toughness:1,accuracy:1},{id:3,name:"Player",role:"DF",speed:5,strength:1,power:1,toughness:1,accuracy:1},{id:4,name:"Player",role:"AT",speed:6,strength:1,power:1,toughness:1,accuracy:1},{id:5,name:"Player",role:"AT",speed:7,strength:1,power:1,toughness:1,accuracy:1}]},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KEEPER_RANGE=t.INTERCEPT_RANGE=t.DRIBBLE_POWER_GOAL=t.DRIBBLE_POWER=t.PLAYER_COMFORT_DISTANCE=t.KICKING_RANGE=t.RECEIVING_RANGE=t.MIN_PASS_DISTANCE=t.PASS_THREAT_RADIUS=t.POT_SHOT_CHANCE=t.MAX_PASS_POWER=t.MAX_SHOT_POWER=t.TIME_DELTA_MILI=t.TIME_DELTA=t.DRAG=void 0;t.DRAG=.975;t.TIME_DELTA=1/60;t.TIME_DELTA_MILI=1/60*1e3;t.MAX_SHOT_POWER=750;t.MAX_PASS_POWER=750;t.POT_SHOT_CHANCE=.005;t.PASS_THREAT_RADIUS=75;t.MIN_PASS_DISTANCE=100;t.RECEIVING_RANGE=50;t.KICKING_RANGE=20;t.PLAYER_COMFORT_DISTANCE=75;t.DRIBBLE_POWER=100;t.DRIBBLE_POWER_GOAL=150;t.INTERCEPT_RANGE=192;t.KEEPER_RANGE=16},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.blueRegions=t.redRegions=void 0;t.redRegions={defending:[6,1,13,2,14],attacking:[6,2,14,10,9]};t.blueRegions={defending:[11,16,4,15,3],attacking:[11,14,3,7,8]}},function(e,t,s){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)});Object.defineProperty(t,"__esModule",{value:!0});var n,r=s(0),a=s(2),c=s(1);!function(e){e[e.PrepareForKickOff=0]="PrepareForKickOff",e[e.Defending=1]="Defending",e[e.Attacking=2]="Attacking"}(n||(n={}));var l=function(e){function t(t,s,i,o,l,h){var p=e.call(this,t)||this;p.supportingPlayer=null,p.controllingPlayer=null,p.receivingPlayer=null,p.closestPlayer=null,p.scene.add.existing(p),p.goal=o,p.goalHome=l,p.isLeft=i,p.regions=h;var u=r.Teams.find((function(e){return e.id===s})),f=u.players.map((function(e){return r.Players.find((function(t){return t.id===e}))}));return p.players=f.map((function(e,t){var s=a.getRegionPos(p.regions.defending[t]),i=new("GK"===e.role?c.PlayerKeeper:c.PlayerField)(p.scene,s.x,s.y,u.frame,e,t,u.name,s,p);return p.add(i),i})),p.setState(n.PrepareForKickOff),p.spots=new c.SupportSpots(p.scene,p,i),p}return o(t,e),t.prototype.kickOff=function(){this.setState(n.PrepareForKickOff)},t.prototype.preUpdate=function(){switch(this.setClosestPlayer(),this.state){case n.PrepareForKickOff:this.isAllPlayersHome&&this.opponents.isAllPlayersHome&&this.setState(n.Defending);break;case n.Defending:this.isInControl&&this.setState(n.Attacking);break;case n.Attacking:this.isInControl||this.setState(n.Defending)}},t.prototype.setState=function(e){var t="#"+(this.isLeft?"red":"blue")+"-state";switch(this.state){case n.Attacking:this.setSupportingPlayer(null)}switch(this.state=e,e){case n.PrepareForKickOff:a.setText(t,"PrepareForKickOff"),this.closestPlayer=null,this.controllingPlayer=null,this.setReceivingPlayer(null),this.setSupportingPlayer(null),this.updateTargets(e),this.returnAllToHome();break;case n.Defending:a.setText(t,"Defending"),this.updateTargets(e);break;case n.Attacking:a.setText(t,"Attacking"),this.updateTargets(e),this.setSupportingPlayer(this.calculateSupportingPlayer())}return this},t.prototype.returnAllToHome=function(){this.players.forEach((function(e){e.returnHome()}))},t.prototype.sendFieldPlayersToHome=function(){this.players.forEach((function(e){"GK"!==e.role&&e.returnHome()}))},t.prototype.updateTargets=function(e){var t=this.regions,s=t.defending,i=t.attacking,o=e===n.Attacking?i:s;this.players.forEach((function(e,t){e.setHome(a.getRegionPos(o[t])).returnHomeIfWaiting(e.home)}))},t.prototype.canShoot=function(e,t,s){void 0===s&&(s=3);for(var i=this.goal.position.clone(),o=this.goal.height-this.ball.height;s--;)if(i.y=this.goal.position.y-o/2+Math.random()*o,this.ball.timeToCoverDistance(e.distance(i),t)>=0&&this.isPassSafeFromAllOpponents(e,i,null,t))return[!0,i];return[!1,i]},t.prototype.getBestPassToReceiver=function(e,t){var s=this,i=this.ball.position,o=i.distance(e.position),n=this.ball.timeToCoverDistance(o,t);if(n<=0)return null;var r=e.speedPerSecond*n,a=Phaser.Math.Angle.BetweenPoints(i,e.position),c=Math.sin(r/o),l=new Phaser.Math.Vector2(o,0).rotate(a),h=l.clone().rotate(-c).add(i),p=l.clone().rotate(c).add(i),u=1e4,f=null;return[h,e.position,p].forEach((function(o){var n=Math.abs(o.x-s.goal.position.x);n<u&&s.scene.pitch.contains(o.x,o.y)&&s.isPassSafeFromAllOpponents(i,o,e,t)&&(u=n,f=o)})),f},t.prototype.findPass=function(e,t,s){var i=this,o=1e3,n=null,r=null;return this.players.forEach((function(a){if(a!==e&&e.position.distance(a.position)>s){var c=i.getBestPassToReceiver(a,t);if(c){var l=Math.abs(c.x-i.goal.position.x);l<o&&(o=l,r=a,n=c)}}})),r?[!0,r,n]:[!1,null,null]},t.prototype.requestPass=function(e){this.isPassSafeFromAllOpponents(this.controllingPlayer.position,e.position,e,r.MAX_PASS_POWER)&&this.controllingPlayer.passToRequester(e)},t.prototype.requestSupport=function(){var e=this.calculateSupportingPlayer();!e||this.supportingPlayer&&e===this.supportingPlayer||this.setSupportingPlayer(e)},t.prototype.calculateSupportingPlayer=function(){var e=this,t=1e5,s=null;return this.players.forEach((function(i){if("AT"===i.role&&!i.isControllingPlayer){var o=i.position.distance(e.spots.supportSpot);o<t&&(t=o,s=i)}})),s},t.prototype.isOpponentWithinRadius=function(e,t){return this.opponents.players.some((function(s){return s.position.distance(e)<t}))},t.prototype.isPassSafeFromAllOpponents=function(e,t,s,i){var o=this;return this.opponents.players.every((function(n){return o.isPassSafeFromOpponent(e,t,s,n,i)}))},t.prototype.isPassSafeFromOpponent=function(e,t,s,i,o){var n=Phaser.Math.Angle.BetweenPoints(e,t),r=Phaser.Math.Angle.BetweenPoints(e,i.position),a=e.distance(i.position),c=new Phaser.Math.Vector2(a*Math.cos(r-n),a*Math.sin(r-n));return c.x<0||(e.distance(t)<a?!s||i.position.distance(t)>s.position.distance(t):!(Math.abs(c.y)<i.speedPerSecond*this.ball.timeToCoverDistance(c.x,o)))},t.prototype.setClosestPlayer=function(){var e=this,t=this.players[0];this.players.forEach((function(s){(new Phaser.Math.Vector2).setFromObject(s).distance(e.ball.position)<(new Phaser.Math.Vector2).setFromObject(t).distance(e.ball.position)&&(t=s)})),a.setText("#"+(this.isLeft?"red":"blue")+"-closest","Player "+(t.getData("index")+1)),this.closestPlayer=t},t.prototype.setControllingPlayer=function(e){a.setText("#"+(this.isLeft?"red":"blue")+"-controlling","Player "+(e.getData("index")+1)),a.setText("#"+(this.isLeft?"blue":"red")+"-controlling","-"),this.controllingPlayer=e,this.opponents.controllingPlayer=null,this.setReceivingPlayer(null),this.setSupportingPlayer(null)},t.prototype.setReceivingPlayer=function(e){a.setText("#"+(this.isLeft?"red":"blue")+"-receiving",e?"Player "+(e.getData("index")+1):"-"),this.receivingPlayer=e},t.prototype.setSupportingPlayer=function(e){a.setText("#"+(this.isLeft?"red":"blue")+"-supporting",e?"Player "+(e.getData("index")+1):"-"),this.supportingPlayer&&this.supportingPlayer.returnHome(),this.supportingPlayer=e,this.supportingPlayer&&this.supportingPlayer.support()},t.prototype.setOpponents=function(e){this.opponents=e},t.prototype.getSupportSpot=function(){return this.spots.supportSpot},Object.defineProperty(t.prototype,"isInControl",{get:function(){return!!this.controllingPlayer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAllPlayersHome",{get:function(){return this.players.every((function(e){return e.isAtHome}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ball",{get:function(){return this.scene.ball},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"closestPlayerOnPitchToBall",{get:function(){return this.closestPlayer.position.distance(this.ball.position)<this.opponents.closestPlayer.position.distance(this.ball.position)?this.closestPlayer:this.opponents.closestPlayer},enumerable:!1,configurable:!0}),t}(Phaser.GameObjects.Group);t.default=l},function(e,t,s){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)});Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"score",{get:function(){return this._score},set:function(e){this._score=e},enumerable:!1,configurable:!0}),t}(Phaser.Math.Vector2);t.default=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(0),o=s(1),n=function(){function e(e,t,s){this._supportSpot=null;this.team=t,this.spots=[],this.circles=[];for(var i=0;i<6;i++)for(var n=0;n<5;n++){var r=new Phaser.Math.Vector2(s?768:192,152),a=new Phaser.Math.Vector2(r.x+80*n,r.y+80*i);this.spots.push(new o.Spot(a.x,a.y)),this.circles.push(e.add.circle(a.x,a.y,8,10066329).setDepth(1).setVisible(!0))}e.time.addEvent({delay:1e3,loop:!0,callbackScope:this,callback:function(){this.team.isInControl&&this.calculateSupportSpot()}})}return e.prototype.calculateSupportSpot=function(){var e=this;this._supportSpot=null;var t=0;return this.spots.forEach((function(s,o){if(s.score=1,e.team.isPassSafeFromAllOpponents(e.team.controllingPlayer.position,s,null,i.MAX_PASS_POWER)&&(s.score+=2),e.team.canShoot(s,i.MAX_SHOT_POWER)[0]&&(s.score+=1),e.team.isInControl){var n=e.team.controllingPlayer.position.distance(s),r=Math.abs(200-n);if(r<200){var a=2*(200-r)/200;s.score+=a}}e.circles[o].setScale(s.score/4),s.score>t&&(t=s.score,e._supportSpot=s)})),this._supportSpot},Object.defineProperty(e.prototype,"supportSpot",{get:function(){return this._supportSpot?this._supportSpot:this.calculateSupportSpot()},enumerable:!1,configurable:!0}),e}();t.default=n},function(e,t,s){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)});Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(t,s,i){var o=e.call(this,t,0,0)||this;return o.scene.add.existing(o),o.setDepth(5),o.add(new Phaser.GameObjects.Line(o.scene,16,0,0,0,16,-16,i?16711680:255)),o.add(new Phaser.GameObjects.Rectangle(o.scene,16,-30,10,14,i?16711680:255).setOrigin(0,0)),o.add(new Phaser.GameObjects.BitmapText(o.scene,18,-28,"font3x5",(s+1).toString(),null).setOrigin(0,0).setScale(2)),o}return o(t,e),t}(Phaser.GameObjects.Container);t.default=n},function(e,t,s){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)});Object.defineProperty(t,"__esModule",{value:!0});var n,r=s(2),a=s(0),c=s(3);!function(e){e[e.Wait=0]="Wait",e[e.ReceiveBall=1]="ReceiveBall",e[e.KickBall=2]="KickBall",e[e.Dribble=3]="Dribble",e[e.ChaseBall=4]="ChaseBall",e[e.ReturnToHome=5]="ReturnToHome",e[e.SupportAttacker=6]="SupportAttacker"}(n||(n={}));var l=function(e){function t(t,s,i,o,r,a,c,l,h){var p=e.call(this,t,s,i,o,r,a,c,l,h)||this;return p.setState(n.ReturnToHome),p}return o(t,e),t.prototype.setState=function(t){var s="#"+this.getData("name")+"-"+(this.getData("index")+1);switch(this.state){case n.ReceiveBall:this.team.receivingPlayer=null;break;case n.SupportAttacker:this.team.supportingPlayer=null}switch(t){case n.ChaseBall:r.setText(s,"ChaseBall"),this.setMode(c.Modes.Pursuit);break;case n.ReceiveBall:r.setText(s,"ReceiveBall");break;case n.Dribble:r.setText(s,"Dribble"),this.team.setControllingPlayer(this);break;case n.SupportAttacker:r.setText(s,"SupportAttacker"),this.setTarget(this.team.getSupportSpot());break;case n.KickBall:r.setText(s,"KickBall"),this.team.setControllingPlayer(this),this.setVelocity(0,0),this.isReadyForNextKick?(this.setData({isReadyForNextKick:!1}),this.scene.time.delayedCall(250,(function(){this.setData({isReadyForNextKick:!0})}),[],this)):this.setState(n.ChaseBall);break;case n.ReturnToHome:r.setText(s,"ReturnToHome"),this.setTarget(this.home),this.setMode(c.Modes.Seek);break;case n.Wait:r.setText(s,"Wait"),this.setVelocity(0,0),this.scene.gameOn||this.setTarget(this.home)}return e.prototype.setState.call(this,t)},t.prototype.preUpdate=function(t,s){switch(this.movePlayer(s),this.state){case n.KickBall:var i=this.facing.dot(this.scene.ball.position.clone().subtract(this.position).normalize());if(this.team.receivingPlayer||this.scene.goalkeeperHasBall||i<0)this.setState(n.ChaseBall);else{var o=a.MAX_SHOT_POWER*i,r=this.team.canShoot(this.scene.ball.position,o);if(r[0]||Math.random()<a.POT_SHOT_CHANCE)this.scene.ball.kick(Phaser.Math.Angle.BetweenPoints(this.position,r[1]),o),this.team.requestSupport(),this.setState(n.Wait);else{var l=a.MAX_PASS_POWER*i,h=this.team.findPass(this,l,a.MIN_PASS_DISTANCE);if(this.isThreatened&&h[0]){var p=h[1],u=h[2],f=Phaser.Math.Angle.BetweenPoints(this.position,u);this.scene.ball.kick(f,l),p.receivePass(u),this.setState(n.Wait),this.team.requestSupport()}else this.setState(n.Dribble),this.team.requestSupport()}}break;case n.Dribble:var d=this.team.goal.facing;if(d.dot(this.facing)>0){var y=Math.sign(this.facing.y*d.x-this.facing.x*d.y);this.scene.ball.kick(this.rotation+y*(Math.PI/5),a.DRIBBLE_POWER)}else this.scene.ball.kick(Phaser.Math.Angle.BetweenPoints(this.position,this.team.goal.position),a.DRIBBLE_POWER_GOAL);this.setState(n.ChaseBall);break;case n.SupportAttacker:if(this.team.isInControl){var g=this.team.getSupportSpot();g!==this.target&&(this.setMode(c.Modes.Seek),this.setTarget(g)),this.team.canShoot(this.position,a.MAX_SHOT_POWER)[0]&&this.team.requestPass(this),this.isAtTarget&&(this.setMode(c.Modes.Track),this.isThreatened||this.team.requestPass(this))}else this.setState(n.ReturnToHome);break;case n.ReceiveBall:this.isBallWithinReceivingRange||!this.team.isInControl?(this.team.setReceivingPlayer(null),this.setState(n.ChaseBall)):this.isAtTarget?this.setMode(c.Modes.Track):this.setMode(c.Modes.Seek);break;case n.ChaseBall:this.isBallWithinKickingRange?this.setState(n.KickBall):this.isClosestPlayerToBall||this.setState(n.ReturnToHome);break;case n.ReturnToHome:this.scene.gameOn?this.shouldChaseBall?this.setState(n.ChaseBall):this.isCloseToTarget(50)&&(this.setTarget(this.position),this.setState(n.Wait)):this.isAtTarget&&this.setState(n.Wait);break;case n.Wait:this.isAtTarget?(this.setMode(c.Modes.Track),this.scene.gameOn&&(this.team.isInControl&&!this.isControllingPlayer&&this.isAheadOfAttacker?this.team.requestPass(this):this.shouldChaseBall&&this.setState(n.ChaseBall))):this.setMode(c.Modes.Seek)}e.prototype.preUpdate.call(this,t,s)},t.prototype.returnHomeIfWaiting=function(e){return this.state!==n.Wait&&this.state!==n.ReturnToHome||this.setTarget(e),this},t.prototype.passToRequester=function(e){if(!this.team.receivingPlayer&&this.isBallWithinKickingRange)return this.team.ball.kick(Phaser.Math.Angle.BetweenPoints(this.team.ball.position,e.position),a.MAX_PASS_POWER),this.setState(n.Wait),e.receivePass(e.position),this.team.requestSupport(),this},t.prototype.returnHome=function(){return this.setState(n.ReturnToHome),this},t.prototype.support=function(){return this.setState(n.SupportAttacker),this},t.prototype.receivePass=function(e){return this.team.setControllingPlayer(this),this.team.setReceivingPlayer(this),this.setTarget(e),this.isInHotPosition||Math.random()<.5&&!this.team.isOpponentWithinRadius(this.position,a.PASS_THREAT_RADIUS)?this.setMode(c.Modes.Seek):this.setMode(c.Modes.Pursuit),this.setState(n.ReceiveBall),this},t.prototype.isPositionInFrontOfPlayer=function(e){return e.subtract(this.position).dot(this.facing)>0},Object.defineProperty(t.prototype,"shouldChaseBall",{get:function(){return this.isClosestPlayerToBall&&!this.team.receivingPlayer&&!this.scene.goalkeeperHasBall},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isThreatened",{get:function(){for(var e=this.team.opponents.players,t=0;t<e.length;t++){var s=e[t];if(this.isPositionInFrontOfPlayer(s.position)&&this.position.distance(s.position)<a.PLAYER_COMFORT_DISTANCE)return!0}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAheadOfAttacker",{get:function(){return Math.abs(this.position.x-this.team.goal.position.x)<Math.abs(this.team.controllingPlayer.position.x-this.team.goal.position.x)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReadyForNextKick",{get:function(){return this.getData("isReadyForNextKick")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isBallWithinReceivingRange",{get:function(){return this.position.distance(this.scene.ball.position)<a.RECEIVING_RANGE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isBallWithinKickingRange",{get:function(){return this.position.distance(this.scene.ball.position)<a.KICKING_RANGE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInHotPosition",{get:function(){return Math.abs(this.position.y-this.team.goal.position.y)<this.scene.pitch.width/3},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isControllingPlayer",{get:function(){return this===this.team.controllingPlayer},enumerable:!1,configurable:!0}),t}(c.default);t.default=l},function(e,t,s){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)});Object.defineProperty(t,"__esModule",{value:!0});var n,r=s(2),a=s(0),c=s(3);!function(e){e[e.TendGoal=0]="TendGoal",e[e.ReturnToHome=1]="ReturnToHome",e[e.PutBallBackInPlay=2]="PutBallBackInPlay",e[e.InterceptBall=3]="InterceptBall"}(n||(n={}));var l=function(e){function t(t,s,i,o,r,a,c,l,h){var p=e.call(this,t,s,i,o,r,a,c,l,h)||this;return p.setState(n.ReturnToHome),p}return o(t,e),t.prototype.setState=function(t){var s="#"+this.getData("name")+"-"+(this.getData("index")+1);switch(this.state){case n.TendGoal:case n.ReturnToHome:case n.InterceptBall:this.setMode(c.Modes.Track)}switch(t){case n.TendGoal:r.setText(s,"TendGoal"),this.setMode(c.Modes.Interpose),this.setTarget(this.rearInterposeTarget);break;case n.ReturnToHome:r.setText(s,"ReturnToHome"),this.setTarget(this.home),this.setMode(c.Modes.Seek);break;case n.PutBallBackInPlay:r.setText(s,"PutBallBackInPlay"),this.team.setControllingPlayer(this),this.team.opponents.sendFieldPlayersToHome(),this.team.sendFieldPlayersToHome();break;case n.InterceptBall:r.setText(s,"InterceptBall"),this.setMode(c.Modes.Pursuit)}return e.prototype.setState.call(this,t)},t.prototype.preUpdate=function(t,s){switch(this.movePlayer(s),this.state){case n.TendGoal:this.setTarget(this.rearInterposeTarget),this.isBallWithinKeeperRange?(this.scene.ball.trap(),this.scene.setGoalkeeperHasBall(!0),this.setState(n.PutBallBackInPlay)):this.isBallWithinRangeForIntercept&&!this.team.isInControl?this.setState(n.InterceptBall):this.isTooFarFromGoalMouth&&this.team.isInControl&&this.setState(n.ReturnToHome);break;case n.ReturnToHome:!this.scene.gameOn||!this.isAtHome&&this.team.isInControl||this.setState(n.TendGoal);break;case n.PutBallBackInPlay:var i=this.team.findPass(this,a.MAX_PASS_POWER,a.MIN_PASS_DISTANCE);if(i[0]){var o=i[1],r=i[2],l=Phaser.Math.Angle.BetweenPoints(this.position,r);this.scene.ball.kick(l,a.MAX_PASS_POWER),this.scene.setGoalkeeperHasBall(!1),this.setMode(c.Modes.Track),this.setState(n.TendGoal),o.receivePass(r)}break;case n.InterceptBall:this.isTooFarFromGoalMouth&&!this.isClosestPlayerOnPitchToBall?this.setState(n.ReturnToHome):this.isBallWithinKeeperRange&&(this.scene.ball.trap(),this.scene.setGoalkeeperHasBall(!0),this.setState(n.PutBallBackInPlay))}e.prototype.preUpdate.call(this,t,s)},t.prototype.returnHome=function(){return this.setState(n.ReturnToHome),this},t.prototype.receivePass=function(){return this.setState(n.InterceptBall),this},Object.defineProperty(t.prototype,"isBallWithinKeeperRange",{get:function(){return this.position.distance(this.scene.ball.position)<a.KEEPER_RANGE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isBallWithinRangeForIntercept",{get:function(){return this.team.goalHome.position.distance(this.scene.ball.position)<=a.INTERCEPT_RANGE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTooFarFromGoalMouth",{get:function(){return this.position.distance(this.rearInterposeTarget)>a.INTERCEPT_RANGE},enumerable:!1,configurable:!0}),t}(c.default);t.default=l}]);